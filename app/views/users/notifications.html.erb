<% provide(:title, 'My Notifications') %>
<% activities = Activity.all %>
<h1>My Notifications</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">

    <ul class="nav nav-tabs">
      <li role="presentation"><a href="/users/<%= @user.id %>/edit">My Info</a></li>
      <li role="presentation"><a href="/users/<%= @user.id %>/activities">Activities</a></li>
      <li role="presentation" class="active"><a href="#">Notifications</a></li>
    </ul>

    <%= form_for(@user) do |f| %>
        <%= render 'shared/error_messages' %>

        <p>Basic Notifications</p>
        <table border="0" width="100%">
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :basic_notifications_mode, 'none', :checked => (@user.basic_notifications_mode == 'none'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label" style="padding-bottom: 25px;">None</label></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :basic_notifications_mode, 'email', :checked => (@user.basic_notifications_mode == 'email'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label">Email</label></td>
            <td valign="middle"><%= f.text_field :basic_notifications_email, :class => 'form-control' %></td>
          </tr>
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :basic_notifications_mode, 'text', :checked => (@user.basic_notifications_mode == 'text'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label">Text</label></td>
            <td valign="middle"><%= f.text_field :basic_notifications_phone_number, :class => 'form-control' %></td>
          </tr>
        </table>

        <p>Notifications Frequency</p>
        <table border="0" width="100%">
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :basic_notifications_frequency, 'daily', :checked => (@user.basic_notifications_frequency == 'daily'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label" style="padding-bottom: 25px;">Daily</label></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :basic_notifications_frequency, 'weekly', :checked => (@user.basic_notifications_frequency == 'weekly'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label">Weekly (Fridays)</label></td>
          </tr>
        </table>

        <p>&nbsp;</p>
        <p>Urgent Notifications</p>
        <table border="0" width="100%">
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :urgent_notifications_mode, 'none', :checked => (@user.urgent_notifications_mode == 'none'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label" style="padding-bottom: 25px;">None</label></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :urgent_notifications_mode, 'email', :checked => (@user.urgent_notifications_mode == 'email'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label">Email</label></td>
            <td valign="middle"><%= f.text_field :urgent_notifications_email, :class => 'form-control' %></td>
          </tr>
          <tr>
            <td width="10%" valign="top"><%= f.radio_button :urgent_notifications_mode, 'text', :checked => (@user.urgent_notifications_mode == 'text'), :class => 'form-control' %></td>
            <td width="20%" valign="top"><label class="form-label">Text</label></td>
            <td valign="middle"><%= f.text_field :urgent_notifications_phone_number, :class => 'form-control' %></td>
          </tr>
        </table>

        <table style="display:none">
          <% Activity.all.each do |activity| %>
              <tr>
                <td width="20%"><%= check_box_tag "user[activity_ids][]", activity.id, @user.activities.include?(activity) %></td>
                <td><b><%= activity.name %></b></td>
              </tr>
          <% end %>
        </table>

        <%= f.submit "Save changes", class: "btn btn-primary" %>
    <% end %>

  </div>
</div>
